
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/default}">
<head>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <title th:text="${event != null} ? ${event.name} : 'Event name'">Event name</title> 
    <meta name="csrf-token" th:content="${_csrf.token}"/>
</head>
<body>
    <div th:if="${event != null}" layout:fragment="content" class="container mt-4">
        <button class="btn btn-outline" onclick="history.back()"><i class="fa-solid fa-arrow-left"></i> Back</button>
        <!-- Event details card -->
        <div class="card border-light mb-3">
            <div class="card-header text-white bg-secondary d-flex justify-content-between align-items-center">
                <h2 class="mb-0" th:text="${event.name}">Event Name</h2>
                <div class="text-white" th:if="${#authorization.expression('hasRole(''ADMINISTRATOR'')')}">
                    <a th:href="@{/events/delete(id=${event.id})}" class="btn btn-danger"><i class="fa-solid fa-trash"></i></a>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <i class="fa-solid fa-calendar text-secondary"></i> 
                        <span class="text-secondary">Date:</span>
                        <span th:text="${event.date}">Event Date</span>
                    </div>
                    
                    <div class="col-md-6">
                        <i class="fa-solid fa-map-marker-alt text-secondary "></i>
                        <span class="text-secondary">Venue:</span>
                        <span th:text="${event.venue != null} ? ${event.venue.name} : 'N/A'">Venue Name</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <i class="fa-solid fa-clock text-secondary "></i> 
                        <span class="text-secondary">Time:</span>
                        <span th:text="${event.time}">Event Time</span>						
                    </div>
                    <div class="col-md-6">
                        <i class="fa-solid fa-people-group text-secondary"></i>
                        <span class="text-secondary">Capacity:</span>
                        <!-- Assume getCapacity is a method; if not, adjust accordingly -->
                        <span th:text="${event.venue != null} ? ${event.venue.capacity} : 'N/A'">Event Capacity</span>		
                    </div>
                </div>
            </div>
        </div>

        <!-- Event description -->
        <div class="card rounded-lg">
            <div class="card-body">
                <!-- Direct property access assuming getDescription is not a method; adjust if it's a method -->
                <p th:text="${event.description}">Event Description</p>
            </div>
        </div>
        
        <!-- Share on Mastodon form -->
        <div class="card mt-3">
		    <div class="card-body">
		        <h5 class="card-title">Share Event</h5>
		        <form id="statusUpdateForm" th:action="@{/events/share-on-mastodon}" method="post">
		            <div class="form-group">
		                <input type="text" name="status" class="form-control" id="statusContent" placeholder="Share your thoughts about the event">
		            </div>
		            <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
		            <input type="hidden" name="eventId" th:value="${event.id}" />
		            <button type="submit" class="btn btn-info"><i class="fa-solid fa-feather"></i> Share on Mastodon</button>
		        </form>
		        <div id="statusUpdateFeedback" class="mt-2"></div>
		    </div>
		</div>
        
        
    </div>
</body>
</html>

